document.addEventListener("astro:page-load",()=>{const p=document.getElementById("pricing-products-data");if(!p){console.error("Pricing products data element not found");return}let m;try{m=JSON.parse(p.textContent||"{}")}catch(o){console.error("Failed to parse pricing products data:",o);return}const x=document.querySelectorAll(".product-tab-btn"),L=document.querySelectorAll(".pricing-card-wrapper"),$={chip:{badge:"Preis-Leistungs-Sieger",color:"from-emerald-500 to-teal-600",bgColor:"bg-emerald-50",textColor:"text-emerald-600",title:"RFID Chip Zeiterfassung",shortDescription:"Schnell, hygienisch und kontaktlos. Jeder Mitarbeiter erhaelt einen persoenlichen Chip.",link:"/zeiterfassungssysteme/chip"},fingerabdruck:{badge:"Sicherheits-Sieger",color:"from-blue-500 to-indigo-600",bgColor:"bg-blue-50",textColor:"text-blue-600",title:"Fingerabdruck Zeiterfassung",shortDescription:"Biometrische Zeiterfassung mit hoechster Sicherheit und Manipulationssicherheit.",link:"/zeiterfassungssysteme/fingerabdruck"},gesichtserkennung:{badge:"Hygiene-Sieger",color:"from-purple-500 to-pink-600",bgColor:"bg-purple-50",textColor:"text-purple-600",title:"Gesichtserkennung Zeiterfassung",shortDescription:"KI-basierte Zeiterfassung - beruehrungslos, schnell und benutzerfreundlich.",link:"/zeiterfassungssysteme/gesichtserkennung"}};function h(o){const r=$[o];if(!r)return;const a=document.getElementById("preview-badge");a&&(a.textContent=r.badge,a.className=`absolute top-3 right-3 px-3 py-1 rounded-full text-xs font-bold text-white bg-gradient-to-r ${r.color} z-10`);const d=document.getElementById("preview-bg");d&&(d.className=`${r.bgColor} p-4 flex items-center justify-center`),document.querySelectorAll(".preview-image").forEach(l=>{l.getAttribute("data-product")===o?l.classList.remove("hidden"):l.classList.add("hidden")}),document.querySelectorAll(".preview-badge-icon").forEach(l=>{l.getAttribute("data-product")===o?l.classList.remove("hidden"):l.classList.add("hidden")});const n=document.getElementById("preview-title");n&&(n.textContent=r.title);const t=document.getElementById("preview-description");t&&(t.textContent=r.shortDescription);const g=document.getElementById("preview-icon-badge");g&&(g.className=`w-10 h-10 rounded-xl ${r.bgColor} flex items-center justify-center`)}function y(o){let r=m[o];if(r||(r=m[o.toLowerCase()]),!r){console.error(`Product data not found for: ${o}`),console.log("Available keys:",Object.keys(m));return}if(!r.plans||!Array.isArray(r.plans)){console.error(`No plans found for product: ${o}`);return}const a=r.plans,d=Array.from(L);if(d.length===0){console.error("No pricing card wrappers found");return}if(a.length===0){console.error("No plans found");return}a.forEach((s,u)=>{if(d[u]){const n=d[u].querySelector(".rounded-2xl");if(!n)return;const t=s.badge==="BELIEBT"||u===1;d[u].setAttribute("data-product",o);const g=n.querySelector(".flex.flex-col.mb-8");if(g){if(g.querySelectorAll("span.inline-block.px-3").forEach(c=>c.remove()),(s.badge==="BELIEBT"||u===1&&!s.badge)&&u===1){const c=document.createElement("span");c.className=`inline-block px-3 py-1 rounded-full text-xs font-semibold mb-2 w-fit ${t?"bg-tertiary text-text-dark":"bg-primary/10 text-primary"}`,c.textContent="BELIEBT",g.insertBefore(c,g.firstChild)}else if(s.badge){const c=document.createElement("span");c.className=`inline-block px-3 py-1 rounded-full text-xs font-semibold mb-2 w-fit ${t?"bg-tertiary text-text-dark":"bg-primary/10 text-primary"}`,c.textContent=s.badge,g.insertBefore(c,g.firstChild)}}const l=n.querySelector("h4");l&&(l.textContent=s.title,l.className=`mb-1 text-2xl font-bold ${t?"text-light":"text-text-dark"}`);const b=n.querySelector(".mb-2.text-sm");b&&(b.textContent=s.description,b.className=`mb-2 text-sm ${t?"text-light/70":"text-text-dark/70"}`);const f=n.querySelector(".mt-4");if(f)if(s.price){let i=`
                <p class="text-[2.5rem] font-semibold mb-1 ${t?"text-light":"text-text-dark"}">ab ${s.price} €</p>
              `;s.discount_price&&(i+=`
                  <p class="text-sm font-medium ${t?"text-tertiary":"text-secondary"}">Sofort bestellen und 10% sparen: ${s.discount_price} €</p>
                `),i+=`
                <p class="text-sm mt-1 ${t?"text-light/70":"text-text-dark/70"}">${s.price_note}</p>
              `,f.innerHTML=i}else f.innerHTML=`
                <p class="text-xl font-semibold mb-1 ${t?"text-light":"text-text-dark"}">${s.price_custom}</p>
                <p class="text-sm ${t?"text-light/70":"text-text-dark/70"}">${s.price_note}</p>
              `;const k=n.querySelector("ul.space-y-3");k&&(k.innerHTML=s.features.map(i=>`
              <li class="flex items-start">
                <span class="p-1.5 rounded mr-2 mt-0.5 flex-shrink-0 ${t?"bg-light/20 border border-light/30":"bg-text/10 border border-border/20"}">
                  <svg class="w-4 h-4 ${t?"text-tertiary":"text-text-dark"}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                  </svg>
                </span>
                <span class="text-sm ${t?"text-light":"text-text-dark"}">${i}</span>
              </li>
            `).join(""));const v=n.querySelector(".mt-auto.space-y-3");v&&s.buttons&&(v.innerHTML=s.buttons.map(i=>{if(i.style==="badge")return`
                    <div class="inline-block px-4 py-2 rounded-lg text-sm font-semibold w-full text-center ${t?"bg-tertiary text-text-dark":"bg-primary/10 text-primary"}">${i.label}</div>
                  `;if(i.style==="light"&&s.discount_price){const c=Number(s.price)-Number(s.discount_price);return`
                    <a href="${i.link}" class="block w-full text-center rounded-lg border-2 transition-all ${t?"bg-light border-light hover:bg-light/90":"bg-white border-border hover:bg-tertiary"}">
                      <div class="py-3 px-4">
                        <span class="font-semibold text-text-dark">${i.label}</span>
                        <div class="text-xs mt-1 font-medium text-secondary">10% Rabatt - Sie sparen ${c} €</div>
                      </div>
                    </a>
                  `}let e="";return i.style==="light"?e=t?"bg-light text-text-dark hover:bg-light/90 border border-light":"bg-white text-text-dark hover:bg-tertiary border border-border":i.style==="primary"?e=t?"bg-tertiary text-text-dark hover:bg-tertiary/90":"btn-primary":i.style==="secondary"?e=t?"bg-secondary text-white hover:bg-secondary/90":"btn-secondary":e=t?"bg-light/20 text-light hover:bg-light/30 border-light/30":"btn-secondary",`
                  <a href="${i.link}" class="btn w-full text-center ${e}">${i.label}</a>
                `}).join("")),n.className=`mx-auto rounded-2xl p-6 h-full flex flex-col ${t?"bg-primary":"bg-light"}`,n.querySelectorAll("p, span, li").forEach(i=>{const e=i;e.closest(".mt-auto")||e.classList.contains("inline-block")&&e.textContent?.includes("BELIEBT")||(t?(e.classList.contains("text-text-dark")&&(e.classList.remove("text-text-dark"),e.classList.add("text-light")),e.classList.contains("text-text-dark/70")&&(e.classList.remove("text-text-dark/70"),e.classList.add("text-light/70"))):(e.classList.contains("text-light")&&(e.classList.remove("text-light"),e.classList.add("text-text-dark")),e.classList.contains("text-light/70")&&(e.classList.remove("text-light/70"),e.classList.add("text-text-dark/70"))))}),n.querySelectorAll("li span.text-sm").forEach(i=>{const e=i;e.className=`text-sm ${t?"text-light":"text-text-dark"}`})}})}if(x.length===0){console.error("No tab buttons found");return}if(x.forEach(o=>{o.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation();const a=o.getAttribute("data-product");if(console.log("Tab clicked, product type:",a),!a){console.error("No product type found on button");return}x.forEach(d=>{d.classList.remove("bg-primary","text-white"),d.classList.add("bg-light","dark:bg-darkmode-light","text-text-dark","dark:text-darkmode-text-dark","hover:bg-primary/10")}),o.classList.remove("bg-light","dark:bg-darkmode-light","text-text-dark","dark:text-darkmode-text-dark","hover:bg-primary/10"),o.classList.add("bg-primary","text-white"),console.log("Calling updatePricingCards with:",a),y(a),h(a)})}),x.length>0){const r=x[0].getAttribute("data-product");console.log("Initializing with product type:",r),r&&(y(r),h(r))}});
