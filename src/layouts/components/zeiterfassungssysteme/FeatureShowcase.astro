---
import ImageMod from "@/components/ImageMod.astro";
import { markdownify } from "@/lib/utils/textConverter";

interface Props {
  features?: {
    title: string;
    description: string;
    image?: string;
    icon?: string;
  }[];
}

const { features } = Astro.props;
---

{
  features && features.length > 0 && (
    <section class="section" id="features">
      <div class="container">
        {features.map((feature, index) => {
          const isEven = index % 2 === 0;
          return (
            <div class={`row items-center ${index > 0 ? "mt-16 lg:mt-24" : ""}`}>
              {/* Image Column */}
              <div
                class={`col-12 lg:col-6 ${isEven ? "lg:order-1" : "lg:order-2"} mb-10 lg:mb-0`}
              >
                <div
                  class="relative rounded-2xl overflow-hidden"
                  data-aos={isEven ? "fade-right" : "fade-left"}
                  data-aos-delay="100"
                >
                  {feature.image ? (
                    <ImageMod
                      src={feature.image}
                      width={600}
                      height={400}
                      alt={feature.title}
                      class="w-full h-full object-cover"
                      format="webp"
                    />
                  ) : (
                    <div class="bg-light dark:bg-darkmode-light aspect-[3/2] flex items-center justify-center">
                      <span class="text-8xl opacity-20">
                        {feature.icon || "ğŸ”§"}
                      </span>
                    </div>
                  )}
                </div>
              </div>

              {/* Content Column */}
              <div
                class={`col-12 lg:col-6 ${isEven ? "lg:order-2 lg:pl-12" : "lg:order-1 lg:pr-12"}`}
              >
                <div
                  data-aos={isEven ? "fade-left" : "fade-right"}
                  data-aos-delay="200"
                >
                  {feature.icon && (
                    <div class="text-5xl mb-4">{feature.icon}</div>
                  )}
                  <h2
                    set:html={markdownify(feature.title)}
                    class="h3 mb-6"
                  />
                  <div
                    set:html={markdownify(feature.description)}
                    class="content"
                  />
                </div>
              </div>
            </div>
          );
        })}
      </div>
    </section>
  )
}
