---
import Benefits from "@/components/home/Benefits.astro";
import CustomerReferences from "@/components/home/CustomerReferences.astro";
import Features from "@/components/home/Features.astro";
import Hero from "@/components/home/Hero.astro";
import Offering from "@/components/home/Offering.astro";
import Plans from "@/components/home/Plans.astro";
import TargetAudiences from "@/components/home/TargetAudiences.astro";
import IndustrySlider from "@/components/home/IndustrySlider.astro";
import Base from "@/layouts/Base.astro";
import { getListPage, getSinglePage } from "@/lib/contentParser.astro";
import CallToAction from "@/partials/CallToAction.astro";
import Testimonial from "@/partials/Testimonial.astro";
import TestimonialSlider from "@/partials/TestimonialSlider.astro";
import ReferenzenBento from "@/partials/ReferenzenBento.astro";
import BlogPreviewSection from "@/partials/BlogPreviewSection.astro";

const homepage = await getListPage("homepage", "-index");
const { hero, feature, offering, benefits, plan, customer_references, target_audiences, industries } = homepage.data;

// Blog Preview Section
const zeiterfassungPflicht = await getListPage("sections", "zeiterfassung-pflicht");
const blogPosts = await getSinglePage("blog");
const zeiterfassungBlog = blogPosts.find(post => post.id === zeiterfassungPflicht.data.blog_id);
---

<Base>
  <Hero {hero} />
  <CustomerReferences data={customer_references} />
  <Features {feature} />
  <ReferenzenBento />
  {target_audiences && <TargetAudiences {target_audiences} />}
  <Offering {offering} />
  {industries && industries.enable && <IndustrySlider {industries} />}
  <Benefits {benefits} />
  {zeiterfassungPflicht.data.enable && zeiterfassungBlog && (
    <BlogPreviewSection
      title={zeiterfassungPflicht.data.title || ""}
      content={zeiterfassungPflicht.data.content || ""}
      source={zeiterfassungPflicht.data.source}
      blog={zeiterfassungBlog}
    />
  )}
  <TestimonialSlider />
  {/*<Testimonial />
  <Plans plan={plan} />*/}
  <CallToAction />
</Base>
